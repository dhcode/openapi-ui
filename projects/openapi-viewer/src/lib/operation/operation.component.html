<div class="oav-operation-layout">
  <div
    [className]="'openapi-operation method-' + operationItem.method"
    [class.deprecated]="operation.deprecated"
    [class.open]="open"
    [id]="tag + '/' + operation.operationId"
  >
    <oav-method-header
      [fragment]="getFragment()"
      [method]="operationItem.method"
      [path]="pathItem.path"
      [open]="open"
      (openChange)="updateOpen($event)"
    >
      {{ operation.summary }}
    </oav-method-header>

    <div class="oav-operation-details">
      <p *ngIf="operationItem.operation.description">
        {{ operationItem.operation.description }}
      </p>

      <form (submit)="send()" [formGroup]="formGroup">
        <ng-container *ngIf="operationItem.parameters?.length">
          <h4>Parameters</h4>
          <oav-parameter *ngFor="let param of operationItem.parameters" [parameter]="param" [formGroup]="formGroup"></oav-parameter>
        </ng-container>
        <button class="send-btn" [disabled]="formGroup.invalid">Send request</button>
      </form>

      <h4 class="oav-divided-container toggle-button left" oavOpenable #openable="openable">
        <span class="main">Responses</span>
        <select class="response-type-select" name="responseType" [(ngModel)]="responseType" (click)="$event.stopPropagation()">
          <option *ngFor="let resType of operationItem.responseTypes" [value]="resType">{{ resType }}</option>
        </select>
      </h4>

      <oav-responses [responses]="operationItem.responses" [responseType]="responseType" [hidden]="!openable.open"></oav-responses>
    </div>
  </div>

  <div class="oav-operation-requests" [hidden]="!requests.length">
    <oav-requests-list [requests]="requests"></oav-requests-list>
  </div>
</div>
